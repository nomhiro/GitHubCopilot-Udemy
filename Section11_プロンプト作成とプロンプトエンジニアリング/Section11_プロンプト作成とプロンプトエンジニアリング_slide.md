---
marp: true
theme: custom-theme
paginate: true
---

<!-- _class: title -->
<!-- _paginate: false -->

# プロンプト作成とプロンプトエンジニアリング

---

# このセクションで学ぶこと

## 学習目標

- **プロンプトエンジニアリング**とは何かを理解する
- **効果的なプロンプト**の作成方法を習得する

---

<!-- _class: lecture -->
<!-- _paginate: false -->

# プロンプトの基礎とコンテキスト決定

---

# プロンプトエンジニアリングとは

## 定義

**プロンプトエンジニアリング**は、AIシステム（GitHub Copilotなど）に対して**明確な指示**を作成するプロセスです。

## 目的

プロジェクトのニーズに合った、以下の条件を満たすコードを生成させること：

- **構文的**に正しいコード
- **機能的**に正しいコード
- **コンテキスト的**に正しいコード

適切なプロンプトにより、Copilotの提案品質が大幅に向上します。

---

# プロンプトエンジニアリングの4つのS原則

<span class="red">試験ポイント: 4つのS原則は頻出です</span>

| 原則 | 英語 | 説明 |
|------|------|------|
| **単一** | Single | 1つのタスクまたは質問に集中する。複数の要求を避ける。 |
| **具体的** | Specific | 指示を明確で詳細にする。期待する結果を明確にする。 |
| **短くする** | Short | 具体的でありながら簡潔に保つ。要点を押さえた記述にする。 |
| **周囲環境** | Surround | 関連ファイルを開いておく。わかりやすいファイル名を使用する。 |

これらの原則は効果的なプロンプト作成の基盤となります。

---

# ベストプラクティス

### 1. 十分な明瞭さを提供する
明確で具体的な指示を書く

### 2. 詳細を含むコンテキストを提供する
背景情報やファイルの情報を提供する

### 3. 学習用の例を提供する
サンプルコードやパターンを示す

### 4. アサートと反復（戦略的反復）
結果を確認し、プロンプトを改善する

---

<!-- _class: lecture -->
<!-- _paginate: false -->

# プロンプトの構成要素と言語オプション

---

# サポートされるプロンプトの種類

| 種類 | 説明 | 例 |
|------|------|-----|
| **直接の質問** | 概念やトラブルシューティング | 「Pythonでクイックソートを実装するには？」 |
| **コード関連の要求** | コード生成、変更、説明 | 「階乗を計算する関数を作成して」 |
| **自由回答式クエリ** | 一般的ガイダンス | 「クリーンなコードのベストプラクティスは？」 |
| **コンテキストプロンプト** | コードスニペット指定 | 「このコードの改善点を提案して」 |

---

# プロンプトの良い例と悪い例

## 悪いプロンプトの例

```
関数を作って
```
→ 曖昧で情報が不足

## 良いプロンプトの例

```
Pythonでリストから偶数のみを抽出して返す関数を作成してください。
入力: 整数のリスト
出力: 偶数のみを含むリスト
```
→ 具体的で明確

---

<!-- _class: lecture -->
<!-- _paginate: false -->

# ゼロショット vs フューショットプロンプティング

---

# 学習アプローチの比較

<span class="red">試験ポイント: 各学習手法の特徴を理解しましょう</span>

| 手法 | 例の数 | 特徴 | 用途 |
|------|--------|------|------|
| **ゼロショット** | なし | 基礎トレーニングのみで生成 | 一般的なパターン |
| **ワンショット** | 1つ | パターン認識を支援 | 特定のスタイル |
| **フューショット** | 複数 | バランスの取れた予測 | 複雑な要件 |

Copilotはこれらの手法を使い分けてコードを生成します。

---

# ゼロショット学習

## 特徴
- 具体的な例なしでコード生成
- Copilotの基礎トレーニングのみに依存

## 例：コメントだけでコード生成

```python
# 摂氏を華氏に変換する関数
def celsius_to_fahrenheit(celsius):
    return celsius * 9/5 + 32
```

一般的なパターンや標準的な機能の実装に最適です。

---

# ワンショット・フューショット学習

## ワンショット学習（1つの例）
```python
# 例: 摂氏を華氏に変換
def celsius_to_fahrenheit(c):
    return c * 9/5 + 32

# 同様に: 華氏を摂氏に変換する関数を作成
```

## フューショット学習（複数の例）
```python
# 朝の挨拶: "おはようございます"
# 昼の挨拶: "こんにちは"
# 夜の挨拶: "こんばんは"
# 時間に応じた挨拶を返す関数を作成
```

例を提供することで、より正確な結果が得られます。

---

# ロールプロンプト

## 専門家の役割を指定する手法

特定の専門家として振る舞うよう指示することで、より専門的な回答を得られます。

| 役割 | プロンプト例 | 期待される結果 |
|------|------------|--------------|
| **セキュリティ専門家** | 「セキュリティ専門家として行動して」 | 脆弱性を考慮したコード |
| **パフォーマンス最適化** | 「パフォーマンス専門家として」 | 最適化されたアルゴリズム |
| **テストスペシャリスト** | 「テスト専門家として」 | 包括的なテストケース |

---

# ロールプロンプトの例

## セキュリティ専門家の役割

```
サイバーセキュリティ専門家として行動してください。
OWASPガイドラインに従ったパスワード検証関数を作成してください。
```

## 期待される出力
- 入力のサニタイズ
- 一般的な攻撃への保護
- 業界標準の検証パターン
- セキュリティのベストプラクティス

---

<!-- _class: lecture -->
<!-- _paginate: false -->

# チャット履歴の活用とベストプラクティス

---

# チャット履歴の活用

Copilot Chatは会話の履歴を使用して、現在のプロンプトにコンテキストを提供します。

## 利点

- **フォローアップ質問**が可能
  - 「それを詳しく説明して」
  - 「テストケースを追加して」
- **コンテキストの継続**
  - 前の質問を繰り返す必要がない
- **反復的な改善**
  - 提案を段階的に改善できる

---

# チャット履歴のベストプラクティス

## 効率的な会話管理

| ベストプラクティス | 説明 |
|------------------|------|
| **新しいスレッドを開始** | 新しいタスクには新しい会話を開始 |
| **不要なリクエストを削除** | 関連しない履歴はコンテキストを汚染する |
| **コンテキストを要約** | 長い会話では要点をまとめる |
| **適切なビューを選択** | タスクに応じてインライン/ウィンドウを使い分け |

---

# チェーンプロンプティング

## 複雑な機能を段階的に実装

```
ターン1: 「ユーザー認証機能を作成して」
ターン2: 「無効な認証情報のエラーハンドリングを追加」
ターン3: 「認証機能のユニットテストを追加」
ターン4: 「JsDoc コメントを追加」
ターン5: 「パフォーマンスを最適化」
```

## 注意点
- 長いプロンプトは処理コストが増加
- 適切なタイミングで会話をリセット
- 重要な情報は要約して引き継ぐ

---

<!-- _class: lecture -->
<!-- _paginate: false -->

# 効果的なプロンプトを書く

---

# 実践：良いプロンプトの書き方

## ステップ1: 目的を明確にする

何を達成したいかを具体的に考える

## ステップ2: コンテキストを追加する

- プログラミング言語
- フレームワーク
- 制約条件

## ステップ3: 反復的に改善する

最初の提案が完璧でなくても、フィードバックを提供して改善

---

# プロンプト改善の例

## 最初のプロンプト
```
ソート関数を作って
```

## 改善されたプロンプト
```
Pythonで以下の条件を満たすソート関数を作成してください：
- クイックソートアルゴリズムを使用
- 整数のリストを昇順にソート
- 元のリストを変更せず新しいリストを返す
- エッジケース（空リスト、単一要素）を処理
```

具体的な要件を追加することで、より正確な結果が得られます。

---

# まとめ

## このセクションで学んだこと

| トピック | 重要ポイント |
|---------|------------|
| **4つのS原則** | Single, Specific, Short, Surround |
| **学習アプローチ** | ゼロショット、ワンショット、フューショット |
