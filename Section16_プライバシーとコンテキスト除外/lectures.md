# セクション16: プライバシーとコンテキスト除外（15%）

## レクチャー1: SKU別プライバシー考慮事項
**時間目安: 10分**

（内容を記述）

---

## レクチャー2: コンテンツ除外の概念と効果
**時間目安: 12分**

### 学習目標
- GitHub Copilotのコンテンツ除外機能の基本概念を理解する
- コンテンツ除外がコード提案に与える影響を説明できる
- セキュリティと機能のバランスを考慮した除外戦略を理解する

### 内容

#### コンテンツ除外とは

GitHub Copilotのコンテンツ除外機能は、コード補完候補の通知において**特定のファイル、ディレクトリ、またはリポジトリを使用しないようにする**ことで、機密情報を保護するための機能です。

#### コード提案に対するコンテンツ除外の影響

コンテンツ除外を設定すると、GitHub Copilotの動作に以下の影響があります：

| 影響範囲 | 詳細 |
|---------|------|
| **コード補完の無効化** | 影響を受けるファイルでは、コードの入力候補を利用できなくなる |
| **コンテキストからの除外** | 対象となるファイル内のコンテンツは、その他のファイルのコード補完候補に使用されなくなる |
| **Chat応答への影響** | 対象となるファイルのコンテンツは、GitHub Copilot Chatの応答に使用されなくなる |

#### セキュリティと機能のバランス

コンテンツ除外は、GitHub Copilotによって生成されるコードの提案の**品質と関連性**に影響を与える可能性があります。

##### メリット
- より安全で準拠したコード候補が得られる
- 機密情報がCopilotの提案に含まれることを防止

##### 考慮事項
- GitHub Copilotで使用できる全体的なコンテキストが減少する可能性がある
- 提案の精度と有用性に影響する可能性がある

##### 例：構成ファイルの除外
重要な構成ファイルを除外すると、Copilotはそのファイルで定義されている構成に依存している関連するコードスニペットを提案しなくなる可能性があります。

**ベストプラクティス**: 除外する必要があるファイルを慎重に分析し、**セキュリティと機能のバランス**を取ることが不可欠です。

#### 設定の適用範囲

コンテンツの除外は、**組織またはリポジトリの設定**でのみ指定できます。

| 項目 | 説明 |
|------|------|
| **適用対象** | GitHub Copilot BusinessまたはEnterpriseサブスクリプションのライセンスを持つすべてのメンバー |
| **設定場所** | エンタープライズ内の組織またはリポジトリ |

**参照**: [コンテンツの除外を管理する - Microsoft Learn](https://learn.microsoft.com/ja-jp/training/modules/github-copilot-management-and-customizations/4-manage-content-exclusions)

---

## レクチャー3: 【ハンズオン】リポジトリ・組織でのコンテンツ除外設定
**時間目安: 15分**

### 学習目標
- リポジトリレベルでコンテンツ除外を構成できる
- 組織レベルでコンテンツ除外を構成できる
- 除外設定のパスパターンを適切に指定できる

### 内容

コンテンツの除外戦略を実装するために、リポジトリ管理者と組織の所有者は以下の構成方法を使用できます。

#### リポジトリに対してコンテンツ除外を構成する

##### 設定手順

1. GitHubで、リポジトリのメインページに移動します
2. リポジトリ名の下にある **[設定]** を選択します
3. サイドバーの **[コード & オートメーション]** セクションで、**[Copilot]** を選択します
4. **[除外するリポジトリとパス]** セクションで、Copilotの提案から除外するファイルまたはディレクトリを指定します

##### ハンズオン：リポジトリ設定の実践

```
【演習1】リポジトリでのコンテンツ除外設定

1. 自分のGitHubリポジトリにアクセス
2. [Settings] > [Code & automation] > [Copilot] に移動
3. 以下のパスパターンを設定：
   - .env
   - secrets/
   - *.key
   - config/credentials.json

4. 設定を保存
```

#### 組織に対してコンテンツ除外を構成する

##### 設定手順

1. GitHubの右上隅にある自分のプロフィール写真を選択し、**[組織]** をクリックします
2. 組織の隣の **[設定]** を選択します
3. 左側のサイドバーで、**[Copilot]** > **[コンテンツの除外]** を選択します
4. Copilotの提案から除外するファイルまたはリポジトリの詳細を入力します

##### ハンズオン：組織設定の実践

```
【演習2】組織でのコンテンツ除外設定

1. 組織の設定ページにアクセス
2. [Copilot] > [Content exclusion] に移動
3. 以下の設定を追加：

   リポジトリ単位での除外：
   - organization/sensitive-repo（リポジトリ全体を除外）

   パスパターンでの除外：
   - **/secrets/**
   - **/*.pem
   - **/config/production.json

4. 設定を保存し、適用を確認
```

#### 設定パターンの例

| パターン | 説明 |
|---------|------|
| `.env` | ルートの.envファイル |
| `**/.env` | 全ての.envファイル |
| `secrets/` | secretsディレクトリ全体 |
| `**/secrets/**` | 全階層のsecretsディレクトリ |
| `*.key` | ルートの全ての.keyファイル |
| `**/*.key` | 全階層の全ての.keyファイル |

#### 適用範囲の確認

設定後、以下の点を確認しましょう：

- [ ] 除外設定がCopilot Business/Enterpriseメンバーに適用されている
- [ ] 対象ファイルでCopilotの提案が表示されないことを確認
- [ ] 他のファイルでの提案に、除外ファイルの内容が使われていないことを確認

**参照**: [コンテンツの除外を管理する - Microsoft Learn](https://learn.microsoft.com/ja-jp/training/modules/github-copilot-management-and-customizations/4-manage-content-exclusions)

---

## レクチャー4: コンテンツ除外の制限と注意点
**時間目安: 10分**

### 学習目標
- コンテンツ除外が完全には有効でない可能性があるシナリオを特定できる
- IDEごとの制限事項を理解する
- セマンティック情報に関する制限を説明できる
- ポリシーの適用範囲を理解する

### 内容

コンテンツの除外はプライバシーとセキュリティを管理するための役に立つツールですが、**十分に効果が発揮されない可能性があるシナリオ**があります。これらの制限を理解しておくことが重要です。

#### 1. IDEの制限

一部の統合開発環境（IDE）では、特定の機能を使っているとコンテンツの除外が適用されない場合があります。

##### Visual Studio Code と Visual Studio での制限

| IDE | 制限事項 |
|-----|---------|
| **Visual Studio Code** | 質問で `@github` チャット参加者を使うと、コンテンツの除外が適用されない |
| **Visual Studio** | 質問で `@github` チャット参加者を使うと、コンテンツの除外が適用されない |

**注意**: `@github` を使用する際は、除外対象のコンテンツが応答に含まれる可能性があることを認識しておく必要があります。

#### 2. セマンティック情報の制限

IDEによってセマンティック情報が**除外されていないファイル**で提供される場合、Copilotは除外されたファイルからの情報も使う場合があります。

##### セマンティック情報に含まれるもの

- コードで使われるシンボルの**型情報**
- 関数呼び出しの**ホバーオーバー定義**

##### 例

```
【シナリオ】
- secrets/config.ts を除外設定している
- main.ts で secrets/config.ts からインポートした関数を使用
- main.ts で作業中、IDEがその関数の型情報を提供
  → Copilotは除外されたファイルからの情報を使用する可能性がある
```

#### 3. ポリシーの範囲

コンテンツの除外の設定は、**設定が構成されている組織のメンバーにのみ適用**されます。

##### 重要なポイント

| 状況 | 結果 |
|------|------|
| 組織メンバーが除外設定済みファイルを使用 | コンテンツ除外が適用される |
| 他のユーザー（組織外）が同じファイルにアクセス | コンテンツ除外は適用されない |

**具体例**:
- パブリックリポジトリの特定ファイルを除外設定
- 組織外のユーザーがそのリポジトリをフォーク
- フォークしたユーザーには除外設定が適用されない
- 指定されたファイルを参照するコードの入力候補の提案とCopilot Chatの応答が表示される

#### まとめ：コンテンツ除外の制限事項チェックリスト

効果的にコンテンツ除外を管理するために、以下の制限を理解しておきましょう：

| 制限 | 詳細 |
|------|------|
| **IDEの機能制限** | `@github` チャット参加者使用時は除外が適用されない |
| **セマンティック情報** | 型情報やホバー定義を通じて除外ファイルの情報が使われる可能性 |
| **ポリシーの範囲** | 設定した組織のメンバーのみに適用、外部ユーザーには適用されない |

**参照**: [コンテンツの除外を管理する - Microsoft Learn](https://learn.microsoft.com/ja-jp/training/modules/github-copilot-management-and-customizations/4-manage-content-exclusions)

---

## レクチャー5: Copilot出力の所有権について
**時間目安: 8分**

（内容を記述）

---

## レクチャー6: 重複検出フィルターと契約上の保護
**時間目安: 10分**

### 学習目標
- GitHub Copilotの契約上の保護について理解する
- IP補償の概念と適用条件を説明できる
- 一致するパブリックコードのフィルター機能の設定方法を把握する

### 内容

#### 契約上の保護

組織が法的要件に準拠し続けられるように、GitHub Copilotでは以下の保護を提供しています。

##### 1. IP補償（知的財産補償）
- **対象プラン**: GitHub Copilot BusinessおよびEnterprise
- **内容**: Copilotの提案の使用に関連する知的財産請求に対する法的保護を提供
- **重要条件**: IP補償を受けるには、**[Matching public code]（一致するパブリックコード）**設定を**ブロック**に設定する必要がある
- **保護範囲**: GitHub Copilotからの提案がサードパーティのIP権利を侵害しているとの申し立てを受けた場合、GitHubが法的責任を負う

##### 2. データ保護契約（DPA）
- ユーザーのデータを保護し、データプライバシー規制に確実に準拠するための対策を概説
- 透明性と、データが安全かつ責任を持って処理されることを保証

##### 3. GitHub Copilot トラスト センター
- セキュリティ、プライバシー、コンプライアンス、知的財産権のセーフガードに関する詳細情報を提供
- ベストプラクティスと法的要件に準拠した使用に関して組織が自信を持つためのリソース

#### 一致するパブリックコードのフィルターによる除外

##### 機能の概要
- 一般公開されているコードと一致するコードの提案を特定して除外
- コードが重複する可能性を最小限に抑える
- コードベースの独創性とセキュリティを維持
- セキュリティで保護されていないコードや非準拠のコードをプロジェクトに組み込むリスクを軽減

##### 設定手順（組織/エンタープライズ）

パブリックコードに一致する候補をブロックするには、以下の手順を実行します：

1. GitHubの任意のページの右上隅にある自分のプロフィール写真を選択
2. **[Your enterprises]（エンタープライズ）** または **[組織]** を選択
3. エンタープライズまたは組織の横にある **[設定]** を選択
4. 左サイドバーで **[Copilot]** を選択
5. **[推奨事項]** で、ドロップダウンメニューの **[Matching public code]（一致するパブリックコード）** を選択
6. **[ブロック]** を選択
7. **[保存]** を選択して新しい設定を確認

##### IP補償を受けるための条件
| 条件 | 必須 |
|------|------|
| Business/Enterpriseプランを使用 | ✅ |
| [Matching public code]設定を「ブロック」に設定 | ✅ |

**参照**: [GitHub Copilot での契約上の保護と一致するパブリック コードの無効化 - Microsoft Learn](https://learn.microsoft.com/ja-jp/training/modules/github-copilot-management-and-customizations/3-github-copilot-contractual-protections-disabling-matching-public-code)

---

## レクチャー7: GitHub.comでのCopilot設定構成
**時間目安: 10分**

（内容を記述）

---

## レクチャー8: セキュリティチェックと警告
**時間目安: 8分**

（内容を記述）

---

## 確認テスト: プライバシーとコンテキスト除外

### 問題1
GitHub CopilotのIP補償が提供されるプランはどれですか？

- A) Free/Pro/Business/Enterprise すべて
- B) Pro/Business/Enterprise のみ
- C) Business/Enterprise のみ ✓
- D) Enterprise のみ

---

### 問題2
IP補償を受けるために必要な設定として正しいものはどれですか？

- A) Copilotを無効にする
- B) [Matching public code]設定をブロックにする ✓
- C) SAML SSOを有効にする
- D) ナレッジベースを作成する

---

### 問題3
GitHub Copilotのデータ保護契約（DPA）が提供するものとして最も適切なものはどれですか？

- A) 無制限のコード補完
- B) データプライバシー規制への準拠と透明性の保証 ✓
- C) 高速なコード生成
- D) 複数のプログラミング言語のサポート

---

### 問題4
一致するパブリックコードのフィルター機能の主な目的は何ですか？

- A) コード補完の速度を向上させる
- B) 公開コードと一致する提案を除外し、コードの独創性とセキュリティを維持する ✓
- C) プライベートリポジトリのみでCopilotを使用可能にする
- D) チャット機能の精度を向上させる

---

### 問題5
組織でパブリックコードに一致する候補をブロックするための設定場所として正しいものはどれですか？

- A) IDEの設定
- B) GitHubの組織設定 > Copilot > 推奨事項 ✓
- C) package.jsonファイル
- D) .gitignoreファイル

---

### 問題6
GitHub Copilot トラスト センターで提供される情報として**含まれない**ものはどれですか？

- A) セキュリティ
- B) プライバシー
- C) コード補完のチュートリアル ✓
- D) 知的財産権のセーフガード

---

### 問題7
IP補償について正しい説明はどれですか？

- A) Copilotの提案がサードパーティのIP権利を侵害した場合、ユーザーが責任を負う
- B) Copilotの提案がサードパーティのIP権利を侵害した場合、GitHubが法的責任を負う ✓
- C) IP補償はすべてのプランで自動的に適用される
- D) IP補償はCopilot Freeプランでのみ利用可能

---

### 問題8
[Matching public code]設定を「ブロック」にした場合の動作として正しいものはどれですか？

- A) すべてのコード提案が無効になる
- B) パブリックコードと一致するコード提案がフィルタリングされる ✓
- C) プライベートリポジトリへのアクセスがブロックされる
- D) チャット機能が無効になる

---

### 問題9
GitHub Copilotのコンテンツ除外を構成できる場所はどれですか？（2つ選択）

- A) IDEの設定ファイル
- B) リポジトリ設定 ✓
- C) 組織設定 ✓
- D) ユーザー個人の設定

---

### 問題10
コンテンツ除外を設定した場合の影響として**正しくない**ものはどれですか？

- A) 影響を受けるファイルでコード補完が無効になる
- B) 対象ファイルの内容が他のファイルのコード補完候補に使用されなくなる
- C) 対象ファイルの内容がCopilot Chatの応答に使用されなくなる
- D) 対象ファイルがGitHubから自動的に削除される ✓

---

### 問題11
リポジトリでコンテンツ除外を設定するための正しいパスはどれですか？

- A) リポジトリ設定 > Security > Content exclusion
- B) リポジトリ設定 > Code & automation > Copilot ✓
- C) リポジトリ設定 > Actions > Copilot exclusion
- D) リポジトリ設定 > General > Copilot

---

### 問題12
Visual Studio CodeでCopilot Chatを使用する際、コンテンツ除外が適用されない場合があるのはどのような状況ですか？

- A) インライン提案を使用している場合
- B) `@github` チャット参加者を使用している場合 ✓
- C) スラッシュコマンドを使用している場合
- D) 複数ファイルを開いている場合

---

### 問題13
コンテンツ除外設定の適用範囲について正しい説明はどれですか？

- A) GitHubの全ユーザーに適用される
- B) リポジトリにアクセスできるすべてのユーザーに適用される
- C) 設定が構成されている組織のメンバーにのみ適用される ✓
- D) Copilot Enterpriseプランのユーザーにのみ適用される

---

### 問題14
セマンティック情報に関するコンテンツ除外の制限について正しい説明はどれですか？

- A) セマンティック情報は常に完全に除外される
- B) 型情報やホバーオーバー定義を通じて、除外されたファイルからの情報が使用される可能性がある ✓
- C) セマンティック情報はCopilot Chatでのみ使用される
- D) セマンティック情報の除外はEnterprise限定機能である

---

### 問題15
GitHub Copilot のコンテンツの除外機能の目的は何ですか?

- A) コード補完の精度を高めるため
- B) 特定のファイルやリポジトリがコードの提案に使用されないようにするため ✓
- C) コード提案の速度を上げるため
- D) 知的財産権の主張に対する法的保護を提供するため

---

### 追加問題: プライバシー認定試験対策（類似問題）

### 問題16
GitHub Copilotのコンテンツフィルターの主な目的は何ですか？

- A) コードの実行速度を向上させる
- B) 不適切または有害なコンテンツが提案に含まれないようにフィルタリングする ✓
- C) ファイルサイズを削減する
- D) コンパイルエラーを自動修正する

> **解説**: GitHub Copilotのコンテンツフィルターは、有害性フィルタリングを通じて、ヘイトスピーチや不適切なコンテンツを検出・防止し、個人データ（名前、住所、ID番号など）を除外することで、安全で適切な提案を生成することを目的としています。

---

### 問題17
GitHub Copilotの毒性フィルター（有害性フィルター）の主な目的は何ですか？

- A) パフォーマンスを最適化する
- B) ヘイトスピーチ、攻撃的な言語、不適切なコンテンツを検出して除外する ✓
- C) コードの構文エラーを修正する
- D) ファイルの暗号化を行う

> **解説**: 毒性フィルター（有害性フィルター）は、ヘイトスピーチ、攻撃的な言語、不適切なコンテンツを検出して、それらが提案やレスポンスに含まれないようにすることを目的としています。これにより、安全で専門的なコード提案が維持されます。
