---
marp: true
theme: custom-theme
paginate: true
---

<!-- _class: title -->
<!-- _paginate: false -->

# セキュリティ・パフォーマンス・トラブルシューティング

---

# このセクションで学ぶこと

- GitHub Copilotを使ったセキュリティ脆弱性の特定方法
- パフォーマンス最適化のための提案活用テクニック
- コード提案が表示されない場合のトラブルシューティング
- コンテンツ除外が適用されない場合の対処方法
- Copilotをトリガーして提案を得る方法

---

<!-- _class: lecture -->
<!-- _paginate: false -->

# セキュリティ脆弱性の特定支援

---

# GitHub Copilotでセキュリティ問題を発見

GitHub Copilotは開発者がセキュリティ脆弱性を早期に発見するのを支援します

## 主なセキュリティ支援機能

| 機能 | 説明 |
|------|------|
| **SQLインジェクション検出** | パラメータ化されていないクエリを検出 |
| **XSS脆弱性の指摘** | ユーザー入力のエスケープ漏れを発見 |
| **認証の問題** | 不適切な認証パターンを識別 |
| **機密データ保護** | ハードコードされた認証情報を警告 |

<span class="red">試験ポイント: Copilotは脆弱性を検出するが、最終確認は開発者が行う</span>

---

# SQLインジェクションの検出例

GitHub Copilot Chatに以下のようなプロンプトで脆弱性を確認できます

```
このクエリにSQLインジェクションの脆弱性がないか分析して：

const query = `SELECT * FROM Users
WHERE Username = '${username}' AND Password = '${password}'`;
```

## Copilotの分析結果
- 文字列補間による脆弱性を指摘
- パラメータ化クエリへの修正を提案
- 安全なコーディングパターンを推奨

---

# セキュリティ脆弱性の確認プロンプト例

| 目的 | プロンプト例 |
|------|------------|
| **SQLインジェクション** | 「このクエリにSQLインジェクションの脆弱性がないか確認して」 |
| **入力検証** | 「このユーザー入力の検証は十分か確認して」 |
| **認証確認** | 「この認証ロジックにセキュリティ上の問題がないか確認して」 |
| **機密データ** | 「機密データが適切に保護されているか確認して」 |

<span class="red">試験ポイント: Copilotが生成したコードも必ずセキュリティレビューを行う</span>

---

# セキュリティレビューのベストプラクティス

## Copilotを使ったセキュリティ確認の手順

1. **コードを選択** して Copilot Chat に送信
2. **具体的な脆弱性タイプ** を指定して質問
3. Copilotの提案を **批判的に評価**
4. 必要に応じて **追加のセキュリティツール** で検証

## 注意点

- Copilotは **すべての脆弱性を検出できるわけではない**
- 最終的なセキュリティ確認は **開発者の責任**
- 重要なセキュリティ機能は **専門家によるレビュー** も検討

---

<!-- _class: lecture -->
<!-- _paginate: false -->

# パフォーマンス最適化の提案活用

---

# Copilotでパフォーマンスを改善

GitHub Copilotはコードのパフォーマンス問題を特定し、改善を提案できます

## パフォーマンス最適化の支援

| 最適化タイプ | 説明 |
|------------|------|
| **クエリ最適化** | 非効率なSQLクエリの改善提案 |
| **アルゴリズム改善** | より効率的なアルゴリズムの提案 |
| **メモリ使用量** | 不要なメモリ割り当ての削減 |
| **ループ最適化** | 非効率なループ処理の改善 |

---

# Code Optimizations 拡張機能

Visual Studio Code では Code Optimizations 拡張機能を使用できます

## `@code_optimizations` コマンド

- `/insights`: Application Insights から最適化提案を取得
- `/optimize`: 選択したコードの最適化を提案

## 使用例

```bash
@code_optimizations /optimize
```

コードを選択した状態でこのコマンドを実行すると、パフォーマンス改善の提案が得られます

---

# パフォーマンス最適化のベストプラクティス

## 効果的な最適化依頼

1. **具体的な問題** を説明する（遅い処理、高メモリ使用など）
2. **現在の制約** を明示する（リアルタイム処理が必要など）
3. **測定可能な目標** を設定する

## 注意点

- 最適化の提案は **必ずテスト** してから適用
- **可読性とのバランス** を考慮する
- **早すぎる最適化** は避ける

<span class="red">注意: Copilotの提案は必ず実際のパフォーマンステストで検証する</span>

---

# 提案品質向上のベストプラクティス

| プラクティス | 効果 |
|------------|------|
| **開いているファイルを整理** | 関連するファイルのみ開いてコンテキストを絞る |
| **適切なファイル拡張子を使用** | 言語を正しく認識させる |
| **コードの構造を維持** | 一貫したコーディングスタイルを保つ |
| **フィードバックを活用** | 提案を受け入れ/拒否してCopilotの学習を促進 |

---

# まとめ

## セキュリティとパフォーマンス

- Copilotは脆弱性検出とパフォーマンス最適化を支援
- 最終確認は**開発者の責任**

## トラブルシューティング

- 提案が表示されない → **インターネット接続**から確認
- コンテンツ除外が反映されない → **最大30分待機**またはIDE再起動
- `@github` 使用時は**除外が適用されない**可能性

## 提案品質の向上

- **明確なコンテキスト**を提供
- **Ctrl + Enter** で手動トリガー
- **詳細なコメント**で期待を明確に

---

<!-- _class: title -->
<!-- _paginate: false -->

# セキュリティ・パフォーマンス・トラブルシューティング

